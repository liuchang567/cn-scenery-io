(function(e){function t(t){for(var n,a,s=t[0],l=t[1],c=t[2],d=0,m=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&m.push(o[a][0]),o[a]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(m.length)m.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],n=!0,s=1;s<i.length;s++){var l=i[s];0!==o[l]&&(n=!1)}n&&(r.splice(t--,1),e=a(a.s=i[0]))}return e}var n={},o={app:0},r=[];function a(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=n,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(i,n,function(t){return e[t]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;r.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},1:function(e,t){},2:function(e,t){},"56d7":function(e,t,i){"use strict";i.r(t);var n=i("2b0e"),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("router-view")},r=[],a={name:"App",components:{}},s=a,l=i("2877"),c=Object(l["a"])(s,o,r,!1,null,null,null),u=c.exports,d=i("8c4f"),m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"map",attrs:{id:"map"}}),i("div",{staticClass:"info"},[i("span",[e._v(e._s(e.index))]),i("span",[e._v("longitude："+e._s(e.position.longitude))]),i("span",[e._v("latitude："+e._s(e.position.latitude))]),i("span",[e._v("altitude："+e._s(e.position.altitude))])])])},p=[],f=i("ec35");const g="pk.eyJ1IjoibGN5eSIsImEiOiJja2htc2c0OTQwaW9vMnBxcTl4c2d1NDd1In0.drhx9Uv2m-a35dsoGEencw",h="ckhmthlhs07w619nufi7i57gf",y="lcyy",v="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI3NWFjY2IyZC0xMDk1LTRkZmQtYjU5My01ZTdhMWU1ZTAxZmMiLCJpZCI6MzY2NTEsImlhdCI6MTYwMzg3MDA2NH0.xxGW4wAehVu2lqWA-9XT5ZjcIbvUlG6P2yHjl7-3Lu0";function w(){f["Ion"].defaultAccessToken=v}function b(e,t={}){const i=t.tileKeys||["mapbox"],n=t.pos||[116.435314,40.960521,2e7],o=new f["Cartesian3"].fromDegrees(n[0],n[1],n[2]),r=t.hpr||[0,-90,0],a=new f["HeadingPitchRoll"].fromDegrees(r[0],r[1],r[2]),s={scene3DOnly:!0,geocoder:!1,homeButton:!1,navigationHelpButton:!1,selectionIndicator:!1,baseLayerPicker:!1,timeline:!1,creditsDisplay:!1,animation:!1,fullscreenButton:!1},l=new f["Viewer"](e,Object.assign({},s,t));return l.camera.flyTo({destination:o,orientation:a,endTransform:f["Matrix4"].IDENTITY}),l.scene.debugShowFramesPerSecond=!0,l.imageryLayers.remove(l.imageryLayers.get(0)),l.scene.globe.baseColor=f["Color"].WHITE,l.scene.globe.enableLighting=!0,l.scene.fog.enabled=!0,l.shadows=!0,l.scene.skyAtmosphere.saturationShift=1,x(l,i)}const T={mapbox:"",tianditu:"http://t0.tianditu.gov.cn/img_w/wmts?tk=ebf64362215c081f8317203220f133eb",google:"http://mt1.google.cn/vt/lyrs=s&hl=zh-CN&x={x}&y={y}&z={z}",mapboxB:"https://api.mapbox.com/styles/v1/"+y+"/"+h+"/tiles/256/{z}/{x}/{y}?access_token="+g,TDTIMGC:"https://{s}.tianditu.gov.cn/img_c/wmts?service=wmts&request=GetTile&version=1.0.0&LAYER=img&tileMatrixSet=c&TileMatrix={TileMatrix}&TileRow={TileRow}&TileCol={TileCol}&style=default&format=tiles&tk=ebf64362215c081f8317203220f133eb",TDTCIAC:"https://{s}.tianditu.gov.cn/cia_c/wmts?service=wmts&request=GetTile&version=1.0.0&LAYER=cia&tileMatrixSet=c&TileMatrix={TileMatrix}&TileRow={TileRow}&TileCol={TileCol}&style=default&format=tiles&tk=ebf64362215c081f8317203220f133eb"};function x(e,t){return e.tiles={mapbox:new f["ImageryLayer"](new f["MapboxImageryProvider"]({mapId:"mapbox.satellite",accessToken:g})),tianditu:new f["ImageryLayer"](new f["WebMapTileServiceImageryProvider"]({url:T.tianditu,layer:"img",style:"default",tileMatrixSetID:"w",format:"tiles"})),google:new f["ImageryLayer"](new f["UrlTemplateImageryProvider"]({url:T.google})),mapboxB:new f["ImageryLayer"](new f["UrlTemplateImageryProvider"]({url:T.mapboxB,maximumLevel:22})),TDT_IMG_C:new f["ImageryLayer"](new f["WebMapTileServiceImageryProvider"]({url:T.TDTIMGC,layer:"tdtImg_c",style:"default",format:"tiles",tileMatrixSetID:"c",subdomains:["t0","t1","t2","t3","t4","t5","t6","t7"],tilingScheme:new f["GeographicTilingScheme"],tileMatrixLabels:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],maximumLevel:50,show:!1})),TDT_CIA_C:new f["ImageryLayer"](new f["WebMapTileServiceImageryProvider"]({url:T.TDTCIAC,layer:"tdtImg_c",style:"default",format:"tiles",tileMatrixSetID:"c",subdomains:["t0","t1","t2","t3","t4","t5","t6","t7"],tilingScheme:new f["GeographicTilingScheme"],tileMatrixLabels:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],maximumLevel:50,show:!1}))},Object.defineProperty(e,"tileKeys",{get:()=>t,set:i=>{t=i,Object.keys(e.tiles).forEach(i=>{const n=e.tiles[i],o=e.imageryLayers.contains(n),r=t.includes(i);r&&!o?e.imageryLayers.add(n):!r&&o&&e.imageryLayers.remove(n,!1)})}}),e.tileKeys=t,e}i("e877");var I={name:"layout",data(){return{position:{},index:0}},props:{},computed:{},watch:{},created(){w()},mounted(){this.init(),this.loadModel()},beforeDestroy(){navigator.geolocation.clearWatch()},methods:{init(){this.viewer=b("map"),this.scene=this.viewer.scene,this.camera=this.viewer.camera},loadModel(){const e=new f.HeadingPitchRoll(0,0,0),t=f.Cartesian3.fromDegrees(120.01231,30.01231,1e3),i=f.Transforms.headingPitchRollQuaternion(t,e);this.entity=this.viewer.entities.add({position:t,orientation:i,model:{uri:"/glb/Cesium_Air.glb",minimumPixelSize:128,maximumScale:2e4}}),this.viewer.clock.multiplier=5,this.viewer.clock.shouldAnimate=!0,this.viewer.trackedEntity=this.entity,this.location()},test(){setInterval(()=>{this.index++;let e=120.01231+.112*this.index,t=30.01231+.112*this.index;this.viewer.scene.camera.setView({destination:new f.Cartesian3.fromDegrees(e,t,1e3),orientation:{heading:0,pitch:f.Math.toRadians(-90)}}),this.viewer.scene.camera.moveBackward(5e3)},3e3)},resHome(){const e=new f.Cartesian3.fromDegrees(116.435314,40.960521,2e7),t=new f.HeadingPitchRoll.fromDegrees(0,-90,0);this.camera.flyTo({destination:e,orientation:t,endTransform:f.Matrix4.IDENTITY})},location(){navigator.geolocation?navigator.geolocation.watchPosition(e=>{this.position={latitude:e.coords.latitude.toFixed(6),longitude:e.coords.longitude.toFixed(6),altitude:e.coords.altitude.toFixed(6)||0},this.index++;let t=new f.Cartesian3.fromDegrees(this.position.longitude,this.position.latitude,this.position.altitude);this.entity.position=t},e=>{console.log(e)},{frequency:6,enableHighAccuracy:!0,timeout:3e3}):alert("不支持获取地理位置!")}}},M=I,C=Object(l["a"])(M,m,p,!1,null,null,null),_=C.exports;n["a"].use(d["a"]);var D=new d["a"]({routes:[{path:"/",name:"layout",component:_}]});i("b29b");n["a"].config.productionTip=!1,new n["a"]({router:D,render:e=>e(u)}).$mount("#app")},"8f15":function(e,t){function i(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}i.keys=function(){return[]},i.resolve=i,e.exports=i,i.id="8f15"},b29b:function(e,t,i){}});